(function(e){e.fn.typeToSearch=function(t){var n=this;var r={cmd:false,alt:false};var i={input:this.find("input[type=text]"),launchClass:"launch-search",closeClass:"close-search",guideClass:"search-instructions",guideEmptyText:"Begin Typing...",guideSearchText:"Press Enter To Search",searchUrl:false};var s=e.extend({},i,t);var o=function(){e(document).on({keydown:function(t){u(t);if(!e("[contenteditable]").is(":focus")&&!e("input").is(":focus")&&!e("textarea").is(":focus")&&!r.cmd&&!r.alt&&window==window.top||s.input.is(":focus")){searchKeypress(t)}},keyup:function(){if(s.input.is(":focus")){e(".guide span").hide();if(s.input.val()!="")n.find("."+s.guideClass).text(s.guideSearchText);else{n.find("."+s.guideClass).text(s.guideEmptyText)}}u(false)}});n.on("click","."+s.closeClass,closeSearch);e("body").on("click","."+s.launchClass,launchSearchOverlay)};var u=function(e){if(!e){r.cmd=false;r.alt=false}else{if(e.keyCode==91)r.cmd=true;if(e.keyCode==18)r.alt=true}};var a=function(e){if(s.input.val()!=""){if(s.searchUrl){e.preventDefault();window.location.href=s.searchUrl.replace("<%term%>",s.input.val())}}else{e.preventDefault()}};searchKeypress=function(e){if(e.keyCode>47&&e.keyCode<58||e.keyCode>64&&e.keyCode<90){launchSearchOverlay(e)}else if(e.keyCode==13){a(e)}else if(e.keyCode==27){e.preventDefault();closeSearch()}else if(e.keyCode==8&&s.input.val()==""){e.preventDefault();closeSearch()}};launchSearchOverlay=function(t){window.scrollTo(0,0);e("body").addClass("has-search-overlay");s.input.focus()};closeSearch=function(){e("body").removeClass("has-search-overlay");s.input.val("")};o()}})(jQuery)